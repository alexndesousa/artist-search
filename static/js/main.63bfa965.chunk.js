(this["webpackJsonpartist-search"]=this["webpackJsonpartist-search"]||[]).push([[0],{60:function(e,t,n){e.exports=n(89)},65:function(e,t,n){},89:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(7),c=n.n(o),i=(n(65),n(15)),s=n(11),u=n(22),l=n.n(u),p=n(36),f=n(26),d=n.n(f),m=function(){var e=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";t.length<=e;)t+=n.charAt(Math.floor(Math.random()*n.length));return t}(16),t="https://accounts.spotify.com/authorize?response_type=token&client_id="+encodeURIComponent("a4e259d0257745afb6d9bc995d65808d")+"&scope="+encodeURIComponent("user-top-read user-read-private user-read-email playlist-modify-public playlist-read-private")+"&redirect_uri="+encodeURIComponent("http://alexndesousa.github.io/artist-search/")+"&state="+encodeURIComponent(e);window.location=t},h=function(e){var t=function(){for(var e={},t=window.location.hash.substring(1).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");e[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return e}();e({Authorization:" "+t.token_type+" "+t.access_token})},b="https://api.spotify.com/v1";d.a.interceptors.response.use((function(e){return e}),(function(e){console.log("error.response",e.response);var t=e.config,n=e.response.status,a=t;return 429===n||500===n?function(e,t){return console.log("originalRequest",t),new Promise((function(n,a){setTimeout((function(){return n(d()({method:t.method,url:t.url,data:t.data,headers:t.headers}))}),e)}))}(1e3*e.response.headers["retry-after"],a):401===n?(m(),Promise.reject(e)):Promise.reject(e)}));var v=function(e){return d.a.get(b+"/me/playlists?limit=50",{headers:e}).then((function(e){return e.data.items.map((function(e){return e.id}))}))},g=function(e,t){return d.a.get(b+"/playlists/"+e,{headers:t}).then((function(e){return e.data.tracks.total}))},j=function(e,t,n){for(var a=[],r=[],o=0;o<t;o+=100)r.push(d.a.get(b+"/playlists/"+e+"/tracks?offset="+o,{headers:n}).then((function(e){var t=e.data.items.map((function(e){return e.track.artists.map((function(e){return e.name.toLowerCase()}))}));return a=a.concat(t),e})));return Promise.all(r).then((function(e){return a}))},y=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var a,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v(t);case 2:return a=e.sent,e.next=5,a.map(function(){var e=Object(p.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 5:r=e.sent,Promise.all(r).then((function(e){return console.log("resolved ".concat(e)),n(new Set(e.flat().flat())),e}));case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w=function(){var e=Object(p.a)(l.a.mark((function e(t,n){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(n,t);case 2:return a=e.sent,e.next=5,j(n,a,t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O={retrieveAllArtistsAllPlaylists:y},E=n(54),k=n(123),C=n(126),x=n(130),S=n(129),I=Object(E.a)({palette:{primary:{main:"#1FD662"}}}),A=Object(k.a)((function(e){return{paper:{position:"absolute",maxWidth:400,backgroundColor:e.palette.background.paper,border:"2px solid #000",boxShadow:e.shadows[5],padding:e.spacing(2,4,3),borderRadius:"3%"}}})),P=function(e){var t=e.open,n=e.handleClose,a=e.authFunction,o=A();return r.a.createElement("div",null,r.a.createElement(x.a,{open:t,onClose:n,disableBackdropClick:!0,disableEscapeKeyDown:!0,style:{display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement("div",{className:o.paper,align:"center"},r.a.createElement("h2",null,"Click the button below to link your Spotify account"),r.a.createElement("div",{align:"center"},r.a.createElement(C.a,{theme:I},r.a.createElement(S.a,{variant:"contained",color:"primary",onClick:function(){return a()}},"Link Spotify"))))))},R=n(127),U=n(128),_=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],c=Object(a.useState)(null),u=Object(s.a)(c,2),l=u[0],p=u[1],f=Object(a.useState)(""),d=Object(s.a)(f,2),b=d[0],v=d[1],g=Object(a.useState)([]),j=Object(s.a)(g,2),y=j[0],w=j[1],E=Object(a.useState)(!1),k=Object(s.a)(E,2),C=k[0],x=k[1],I=Object(a.useState)(!0),A=Object(s.a)(I,2),_=A[0],F=(A[1],Object(a.useState)(!0)),L=Object(s.a)(F,2),z=L[0],B=L[1],D=O.retrieveAllArtistsAllPlaylists,J=function(){B(!1)};Object(a.useEffect)((function(){null!==l&&D(l,o)}),[l]),console.log("userPlayli"),console.log(n),Object(a.useEffect)((function(){h(p),"https://alexndesousa.github.io/artist-search/"!==window.location.href&&J(),window.location.href.includes("access_token")&&J()}),[]),Object(a.useEffect)((function(){0!==n.length&&x(!0)}),[n]);var M=r.a.createElement(r.a.Fragment,null,_?r.a.createElement(R.a,{container:!0,direction:"column",justify:"center",alignItems:"center",spacing:2,style:{minHeight:"80vh",margin:"0",width:"100%"}},r.a.createElement(R.a,{item:!0},r.a.createElement(U.a,{id:"filled-basic",label:"insert comma separated artists here",margin:"normal",multiline:!0,variant:"filled",value:b,onChange:function(e){v(e.target.value)}})),r.a.createElement(R.a,{item:!0},r.a.createElement(S.a,{disabled:!C,variant:"contained",onClick:function(){return function(){var e=new Set(b.toLowerCase().split(",").map((function(e){return e.trim()}))),t=new Set(Object(i.a)(n).filter((function(t){return e.has(t)})));w(t)}()}},"compare")),r.a.createElement(R.a,{item:!0},Object(i.a)(y).join(", "))):null);return r.a.createElement("div",null,r.a.createElement(P,{open:z,handleClose:J,authFunction:m}),M)};c.a.render(r.a.createElement(_,null),document.getElementById("root"))}},[[60,1,2]]]);
//# sourceMappingURL=main.63bfa965.chunk.js.map